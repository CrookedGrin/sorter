"use strict";var r={organizeNodesByParent:function(r){return r.reduce((r,e)=>(r[e.parent.id]=[...r[e.parent.id]||[],e],r),{})},findDistanceFromTop:function(r,e){let t=[];e.forEach(o=>{r.forEach(r=>{if(o.id===r.id){let o=e.findIndex(e=>e.id===r.id);t.push(o)}})}),t.sort((function(r,e){return r>e?1:r<e?-1:void 0}));let o=t[t.length-1];return e.length-1-o},removeDuplicates:function(r,e){return e.filter((function(e){return!r.find((function(r){return r.id==e.id}))}))},naturalCompare:function(r,e){var t=[],o=[];for(e.name.replace(/(\d+)|(\D+)/g,(function(r,e,o){t.push([e||1/0,o||""])})),r.name.replace(/(\d+)|(\D+)/g,(function(r,e,t){o.push([e||1/0,t||""])}));t.length&&o.length;){var n=t.shift(),i=o.shift(),a=n[0]-i[0]||n[1].localeCompare(i[1]);if(a)return a}return t.length-o.length},splitFixed:function(r){let e=[],t=r[0].parent.numberOfFixedChildren,o=r.slice(r.length-t),n=r.slice(0,r.length-t);return e.push(o,n),e}};var e={alphabetical:function(e,t){switch(e.sort(r.naturalCompare),t){case"asc":return e;case"dsc":return e=e.reverse()}},positionHorzVert:function(r){return r.sort((function(r,e){return r.y<e.y?1:r.y>e.y?-1:r.x<e.x?1:r.x>e.x?-1:void 0})),r},positionVertHorz:function(r){return r.sort((function(r,e){return r.x<e.x?1:r.x>e.x?-1:r.y<e.y?1:r.y>e.y?-1:void 0})),r},random:function(r){for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return r},reverse:function(r){let e=r[0].parent.children;return e=e.filter((function(e){return r.some((function(r){return e.id===r.id}))})),e.reverse(),e},reverseChildren:function(r){return r=r.reverse()}},t=0;if("sorter"===figma.command){var o=figma.root.getPluginData("sortChildrenOnly");figma.showUI(__html__,{width:200,height:246}),o&&figma.ui.postMessage({sortChildrenOnly:o})}else"positionHorzVert"===figma.command?n("sortPositionHorzVert",!1):"positionHorzVertChildren"===figma.command?n("sortPositionHorzVert",!0):"positionVertHorz"===figma.command?n("sortPositionVertHorz",!1):"positionVertHorzChildren"===figma.command?n("sortPositionVertHorz",!0):"alphaAsc"===figma.command?n("sortAlphaAsc",!1):"alphaAscChildren"===figma.command?n("sortAlphaAsc",!0):"alphaDsc"===figma.command?n("sortAlphaDsc",!1):"alphaDscChildren"===figma.command?n("sortAlphaDsc",!0):"reverse"===figma.command?n("sortReverse",!1):"reverseChildren"===figma.command?n("sortReverse",!0):"random"===figma.command?n("sortRandom",!1):"randomChildren"===figma.command&&n("sortRandom",!0),figma.closePlugin(t+" layers sorted.");function n(o,n){let i=Array.from(figma.currentPage.selection);if(!0===n)i.forEach(n=>{let i=n,a=i.children;if(null!=a){let n=[],s=i.numberOfFixedChildren,l=!1,c=[],d=[],h=[];if(a=Array.from(a),a.length<=1)return void figma.notify("Parent must contain at least 2 children");if(s>0&&(l=!0,c=r.splitFixed(a)),"sortPositionHorzVert"==o?l?(d=e.positionHorzVert(c[0]),h=e.positionHorzVert(c[1])):n=e.positionHorzVert(a):"sortPositionVertHorz"==o?l?(d=e.positionVertHorz(c[0]),h=e.positionVertHorz(c[1])):n=e.positionVertHorz(a):"sortAlphaAsc"==o?l?(d=e.alphabetical(c[0],"asc"),h=e.alphabetical(c[1],"asc")):n=e.alphabetical(a,"asc"):"sortAlphaDsc"==o?l?(d=e.alphabetical(c[0],"dsc"),h=e.alphabetical(c[1],"dsc")):n=e.alphabetical(a,"dsc"):"sortReverse"==o?l?(d=e.reverseChildren(c[0]),h=e.reverseChildren(c[1])):n=e.reverseChildren(a):l?(d=e.random(c[0]),h=e.random(c[1])):n=e.random(a),l){let r=a.length,e=i.numberOfFixedChildren;for(let o=0;o<r-e;o++)i.insertChild(o,h[o]),t++;for(let r=0;r<d.length;r++)i.appendChild(d[r]),t++}else n.forEach(r=>{i.appendChild(r),t++})}});else{if(i.length<=1)return void figma.notify("Please select at least 2 layers");let n=r.organizeNodesByParent(i);Object.entries(n).forEach(n=>{n.forEach(n=>{if(Array.isArray(n)){let i=[],a=n[0].parent,s=a.children,l=r.findDistanceFromTop(n,s),c=r.removeDuplicates(n,s);i="sortPositionHorzVert"==o?e.positionHorzVert(n):"sortPositionVertHorz"==o?e.positionVertHorz(n):"sortAlphaAsc"==o?e.alphabetical(n,"asc"):"sortAlphaDsc"==o?e.alphabetical(n,"dsc"):"sortReverse"==o?e.reverse(n):e.random(n);let d=[],h=c.length-l,f=c.splice(h);c.forEach(r=>{d.push(r)}),i.forEach(r=>{d.push(r)}),f.forEach(r=>{d.push(r)}),d.forEach(r=>{a.appendChild(r),t++})}})})}}figma.ui.onmessage=r=>{let e=r.order,o=r.children;figma.root.setPluginData("sortChildrenOnly",o.toString()),n(e,o),figma.notify(t+" layers sorted.",{timeout:800}),t=0};
